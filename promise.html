<!DOCTYPE html>
<html>

<head>
    <title>Page Title</title>
</head>

<body>

    <h1>Promise</h1>
    <script>
        // create a promise
        const isEven = 5
        const p1 = new Promise((resolve, reject) => {
            if (isEven % 2 === 0) {
                resolve('this is even') // success
            } else {
                reject(new Error('this is not even')) // failure
            }
        })

        p1
        .then(
            value => { console.log('success then: ', value) },
            error => { console.log('reject then: ', error) }  
        )
        .catch(error => console.log('error: ', error))


        // create a promise with Promise.resolve
        const p2 = Promise.resolve('other resolve').then(value => console.log('promise resolve: ', value))
        console.log(p2)

        // create a promise with Promise.reject
        const p3 = Promise.reject('other resolve').catch(value => console.log('promise reject: ', value))
        console.log(p3)


        // chaining promises
        fetch('https://tony-json-server.herokuapp.com/api/users')
            .then(res => res.json())
            .then(value => console.log('chaining promise: ', value))

        // promise anti-pattern: nested
        const asyncFunc2 = new Promise(resolve => {
            resolve('this is asyncFunc2') // success
        })
        function aysncFunc1() {
            return new Promise((resovle, reject) => {
                asyncFunc2
                    .then(value => {
                        resovle(1234);
                    })
                    .catch(error => reject(error))
            })
        }

        aysncFunc1().then(value1 => {
            asyncFunc2.then(value2 => {
                console.log('anti pattern: ', value1, value2)
            })
        })
    </script>
</body>

</html>